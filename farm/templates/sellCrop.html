{% include "header.html" %}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">



<div class="container text-center my-4" style="padding-bottom:60px;">
  <h1 class="display-5 fw-bold text-success">
    <i class="bi bi-shop-window me-2"></i>Sell Your Harvest with Confidence
  </h1>
  <p class="lead text-muted">
    <i class="bi bi-megaphone me-1 text-warning"></i> Showcase your best crops to 100+ buyers directly. Get the price you deserve.
  </p></div>


<style>
  body {
    min-height: 100vh;
    margin: 0;
  }

  /* Toggle Button */
  .top-left-btn {
    position: fixed;
    top: 100px;
    left: 20px;
    z-index: 1050;
    text-align: center;
  }

  .sell-label {
    font-weight: bold;
    font-size: 18px;
    margin-bottom: 5px;
    color: #2d3436;
  }

  .toggle-switch {
    position: relative;
    display: inline-block;
    width: 70px;
    height: 34px;
  }

  .toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
  }

  .slider {
    position: absolute;
    cursor: pointer;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(to right, #00b894, #55efc4);
    transition: 0.4s;
    border-radius: 34px;
  }

  .slider:before {
    position: absolute;
    content: "üåæ";
    height: 26px; width: 26px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    border-radius: 50%;
    transition: 0.4s;
    text-align: center;
    line-height: 26px;
    font-size: 14px;
  }

  .toggle-switch input:checked + .slider:before {
    transform: translateX(36px);
    content: "‚úîÔ∏è";
  }

.submit-btn {
  background: rgba(255, 0, 0, 0.61); /* translucent red */
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: white;
  font-weight: bold;
  border-radius: 30px;
  padding: 12px 30px;
  font-size: 16px;
  transition: all 0.3s ease;
  display: block;
  margin: 0 auto;  /* center horizontally */
  text-align: center;
}

.submit-btn:hover {
  background: rgba(255, 0, 0, 0.81);
  transform: scale(1.05);
}

  .file-selected-text {
    margin-top: 10px;
    font-size: 14px;
    color: #333;
  }

/* ========== Glassmorphic Upload Modal ========== */
.modal-content {
  background: rgba(255, 255, 255, 0.05);  /* light transparent layer */
  backdrop-filter: blur(14px);           /* glass blur effect */
  -webkit-backdrop-filter: blur(14px);   /* Safari support */
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.37);
  color: #ffffff;
}

/* Modal Header with slight tint */
.modal-header {
  background: rgba(0, 216, 155, 0.4);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
  color: #fff;
}

/* Upload Card (form container) */
.upload-card {
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.2);
  padding: 30px;
}

/* Input Fields */
.form-control {
  background: rgba(49, 223, 165, 0.07);
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  color: #fff;
  border-radius: 12px;
  padding: 10px 14px;
}

.form-control::placeholder {
  color: rgba(255, 255, 255, 0.6);
}

label {
  color: #e0f7fa;
  font-weight: 600;
}

/* Upload Box */
.upload-box {
  background: rgba(255, 255, 255, 0.05);
  border: 2px dashed rgba(0, 188, 212, 0.6);
  backdrop-filter: blur(8px);
  color: #e0f7fa;
}

.upload-box:hover {
  background-color: rgba(0, 188, 212, 0.08);
  border-color: #00acc1;
}

.upload-box span {
  color: #fff;
}

.file-selected-text {
  color: #ffffff;
}


/* Optional: Darker Background Behind Modal */
.modal-backdrop.show {
  background-color: rgba(0, 0, 0, 0.5);
}


.crop_card{
    margin:0;
  padding:0;
height: 340px;
 width:340px;

 border-radius: 1.2rem; 

}

.card_body{
  display:flex;
  margin:0;
  padding:0;
height: 300px;
 width:340px;

}

.row1 {
    margin:0;
  padding:0;
width:310px;
display:flex;
}

.row2 {
  
gap:18px;
display:flex;
align-items:space-evenly;
font-size:1.03rem;
width:320px;
font-weight:100;
}


.row3 {
padding-top:10px;
font-size:1rem;
width:320px;
font-weight:380;
}



.crop_name{
font-size:2.2rem;
width:200px;
justify-content:space-evenly;


}

.crop_bread_type{
  width:100px;

}

.crop_bread , .crop_type{
font-size:0.7rem;
width:100px;
margin-left:18px;
margin-top:2px;

font-weight:800;
}


/* Crop Card Styling with Dark Box Shadow and Hover Effect */
.crop_card .card {
  
  border-radius: 1.4rem;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4); 
  transition: transform 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
}

/* Hover Effect */
.crop_card .card:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.6); 

}


.delete-container {
  text-align: center;
}

.delete-btn {
  background: linear-gradient(45deg, #ff9100ff, #ff0000ff);
  box-shadow: 0 0 10px rgba(229, 57, 53, 0.4);
  color: white;
  border: none;
  padding: 10px 20px;
  font-size: 0.95rem;
  border-radius: 10px;
  cursor: pointer;
  transition: background-color 0.3s ease, box-shadow 0.3s ease;
  box-shadow: 0 4px 10px rgba(229, 57, 53, 0.2);
}

.delete-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(255, 4, 0, 0.91);
}


 
.crop_card {
  margin: 10px;
  padding-top:10px;
  height: auto;
  width: 340px;
  border-radius: 1.2rem;
  flex: 0 0 auto;
}

</style>


<div class="container mt-4">
  <div class="row g-4">
    {% for crop in data %}
    <div class="col-md-4 d-flex justify-content-center">
      <div class="crop_card">
        <div class="card">
          <!-- Crop Image -->
          <img src="{{ crop.crop_image.url }}" alt="{{ crop.crop_name }}"
            style="height: 320px; width:320px; object-fit: cover; margin: 10px; margin-bottom:0; border-radius: 1.2rem;">

          <!-- Card Body -->
          <div class="card-body">

            <!-- Row 1 -->
            <div class="row1">
              <div class="crop_name">{{ crop.crop_name }}</div>
              <div class="crop_bread_type">
                <div class="crop_bread"> <span style="color: #FFD700;">‚óè</span> Bread : {{ crop.crop_bread }}</div>
                <div class="crop_type"> <span style="color: #32CD32;">‚óè</span> Type : {{ crop.crop_type }}</div>
              </div>
            </div>

            <!-- Row 2 -->
            <div class="row2">
              <div class="dry"><i class="bi bi-droplet-half me-2 text-primary"></i>{{ crop.crop_dryness }}% dry</div>
              <div class="quantity"><i class="bi bi-box-seam me-2 text-success"></i>{{ crop.crop_quantity }} kg</div>
              <div class="price"><i class="bi bi-currency-rupee me-2 text-warning"></i>{{ crop.expected_price }} per(KG)</div>
            </div>

            <!-- Row 3 -->
            <div class="row3">
              This {{ crop.crop_name }} is Grown By Farmer {{ crop.farmer_name }} in The place {{ crop.farming_location }},
              It Took {{ crop.croping_duration }} Months To Grow & Harvest and to reach to You
            </div>

            <!-- Row 4: Delete -->
            <div class="text-center mt-3">
              <form method="POST" onsubmit="return confirm('Are you sure you want to delete this crop?');">
                {% csrf_token %}
                <input type="hidden" name="delete_id" value="{{ crop.id }}">
                <button type="submit" class="btn delete-btn btn-sm btn-outline-dark">üóëÔ∏è Delete Crop</button>
              </form>
            </div>

          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>


<!-- Toggle Button -->
<div class="top-left-btn">
  <div class="sell-label">Sell your Crop</div>
  <label class="toggle-switch">
    <input type="checkbox" data-bs-toggle="modal" data-bs-target="#cropModal">
    <span class="slider"></span>
  </label>
</div>

<!-- Modal -->
<div class="modal fade" id="cropModal" tabindex="-1" aria-labelledby="cropModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" style="width=1900px;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="cropModalLabel">Become a Seller</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
          <form method="POST" action="{% url 'sell_crop' %}" enctype="multipart/form-data">
          {% csrf_token %}
          <input type="hidden" name="form_type" value="upload">

          <div class="upload-card container">
            <h4 class="text-center mb-4">Upload Crop Details</h4>

<div class="row mb-4 dashed-upload-box">
  <div class="col-md-12">
    <label class="upload-box" id="uploadLabel">
      <i class="fas fa-cloud-upload-alt"></i>
      <span>Click or drag to upload Crop Image</span>
      <input type="file" id="formFileLg"  accept="image/*" name="crop_image" onchange="updateFileName(this)" required>
    </label>
    <div class="file-selected-text text-center" id="file-name">No file selected</div>
  </div>
</div>
              
            <div class="row mb-3">
              <div class="col-md-7">
                <label>Farmer's Name</label>
                <input class="form-control" type="text" name="farmer_name" required>
              </div>
              <div class="col-md-5">
                <label>Farmer's age</label>
                <input class="form-control" type="number" name="farmer_age" required>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label>Crop Name</label>
                <input class="form-control" type="text" name="crop_name" required>
              </div>
              <div class="col-md-6">
                <label>Crop Dryness(%)</label>
                <input class="form-control" type="number" name="crop_dryness" required>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label>Crop Bread</label>
                <input class="form-control" type="text" name="crop_bread" required>
              </div>
              <div class="col-md-6">
                <label>Crop Type</label>
                <input class="form-control" type="text" name="crop_type" required>
              </div>
            </div>


            <div class="row mb-3">
              <div class="col-md-12">
                <label>Crop Description</label>
                <input class="form-control" style=" height:100px ; " type="text" name="crop_description" required>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label>Crop Quantity in Kg</label>
                <input class="form-control" type="number" name="crop_quantity" required>
              </div>
              <div class="col-md-6">
                <label>Expected Price(per KG)</label>
                <input class="form-control" type="number" name="expected_price" required>
              </div>
            </div>

            <div class="row mb-3">
              <div class="col-md-6">
                <label>Croping Location</label>
                <input class="form-control" type="text" name="farming_location" required>
              </div>
              <div class="col-md-6">
                <label>Croping Duration(month)</label>
                <input class="form-control" type="text" name="croping_duration" required>
              </div>
               


            </div>

            <div class="row mt-4">
              <div class="col-11">
                <button type="submit" class="submit-btn">Submit</button>

              </div>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>



<script>
  function updateFileName(input) {
    const fileName = input.files[0] ? input.files[0].name : "No file selected";
    document.getElementById("file-name").textContent = fileName;
  }
</script>
{% include "footer.html" %}
